name: open-mmlab
channels:
  - conda-forge
  - defaults
dependencies:
  # --------------------
  # Core Python
  # --------------------
  - python=3.8
  - pip
  # - numpy
  # - scipy
  # - cython
  # - matplotlib
  # - pyyaml
  # - tqdm
  # - pillow
  # - shapely
  # - numba=0.53.1
  # - networkx

  # --------------------
  # System-like deps (safe in conda)
  # --------------------
  - setuptools
  - wheel

  # --------------------
  # Pip-only packages
  # --------------------
  - pip:
      # ---- OpenCV (headless, no libGL issues) ----
      - opencv-python-headless
      
      # ---- PyTorch 1.9 (CUDA 11.1) ----
      - torch==1.9.1+cu111 
      - torchvision==0.10.1+cu111 
      - torchaudio==0.9.1
      - -f https://download.pytorch.org/whl/torch_stable.html

      # ---- OpenMMLab core ----
      - mmcv-full==1.4.0
      - -f https://download.openmmlab.com/mmcv/dist/cu111/torch1.9.0/index.html

      # ---- mmdet / mmseg compatibility ----
      - mmdet==2.14.0
      - mmsegmentation==0.14.1

      # ---- Misc utilities ----
      - timm
      - lyft_dataset_sdk
      - networkx==2.2
      - nuscenes-devkit
      - plyfile
      - scikit-image
      - numba==0.48.0
      - numpy==1.19
